<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>抽奖应用</title>
    <style>
      body {
        font-family: 'Arial', sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 20px 0 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        height: 100vh;
      }

      button {
        background-color: #f24949;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #ea5959;
      }

      button:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
      }

      .controls {
        display: flex;
        align-items: center;
        justify-content: space-between;
        min-width: 400px;
        margin-bottom: 16px;
      }

      .input-wrap label {
        font-size: 14px;
        margin-right: 10px;
      }

      .input-wrap input {
        width: 100px;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 8px;
        font-size: 14px;
      }

      .history-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: flex-start;
      }

      .round {
        margin: 0 10px;
      }

      .round-title {
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 10px;
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      li {
        font-size: 26px;
        background-color: #fff;
        padding: 10px;
        margin: 5px 0;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
      }

      li.show {
        opacity: 1;
        transform: translateY(0);
      }

      img {
        max-width: 100%;
        max-height: 100%;
        border-radius: 5px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="controls">
      <div class="input-wrap">
        <label for="winnersCount">每轮中奖人数：</label>
        <input type="number" id="winnersCount" min="1" value="10" />
      </div>
      <button id="drawButton" onclick="drawWinners()">抽奖</button>
    </div>
    <div id="winnersContainer" class="history-container"></div>

    <script>
      let participants = JSON.parse(
        '[{"A":"八2","B":"刘逸轩"},{"A":"八2","B":"潘梓航"},{"A":"八2","B":"贾蓁蓁"},{"A":"八2","B":"刘一涵"},{"A":"八2","B":"郑航"},{"A":"八2","B":"赵菀茹"},{"A":"八2","B":"于乐洋"},{"A":"八2","B":"王文锦"},{"A":"八2","B":"王一涵"},{"A":"八2","B":"杨雅晴"},{"A":"八2","B":"黄憬怡"},{"A":"八2","B":"高子昂"},{"A":"八2","B":"郭嘉欣"},{"A":"八2","B":"张清博"},{"A":"八2","B":"张盛喆"},{"A":"八2","B":"靳亚楠"},{"A":"八2","B":"王嘉乐"},{"A":"八2","B":"张雨扬"},{"A":"八2","B":"孔德祥"},{"A":"八2","B":"王欣延"},{"A":"八2","B":"巩颖"},{"A":"八2","B":"廖心虎"},{"A":"八2","B":"尹如心"},{"A":"八2","B":"丁一平"},{"A":"八2","B":"冯曜"},{"A":"八2","B":"田馨语"},{"A":"八4","B":"徐涵"},{"A":"八1","B":"管子亮"},{"A":"八2","B":"赵锶铭"},{"A":"八2","B":"李若涵"},{"A":"八2","B":"王增建"},{"A":"八2","B":"刘鑫桐"},{"A":"八2","B":"党沛森"},{"A":"八2","B":"方廉皓"},{"A":"八2","B":"郑雨轩"},{"A":"八2","B":"李明宇"},{"A":"八2","B":"杨金超"},{"A":"八2","B":"李策"},{"A":"八3","B":"张宇宸"},{"A":"八2","B":"刘雨欣"},{"A":"八2","B":"薛傲涵"},{"A":"八3","B":"崔鹏羽"},{"A":"八2","B":"杨成昊"},{"A":"八2","B":"李定宇"},{"A":"八4","B":"刘涵宇"},{"A":"八3","B":"王靖燃"},{"A":"八2","B":"陶国政"},{"A":"八4","B":"王梓灵"},{"A":"八2","B":"刘语瞳"},{"A":"八2","B":"郭珂馨"},{"A":"八4","B":"贺展"},{"A":"八3","B":"卢明昊"},{"A":"八2","B":"刘涵"},{"A":"八1","B":"田茗铭"},{"A":"八1","B":"刘浩冉"},{"A":"八2","B":"张恩睿"},{"A":"八4","B":"王博文"},{"A":"八4","B":"高子含"},{"A":"八4","B":"吉娅诺"},{"A":"八1","B":"王烁"},{"A":"八1","B":"刘亦晗"},{"A":"八3","B":"魏晨曦"},{"A":"八4","B":"王子淇"},{"A":"八3","B":"王语菡"},{"A":"八3","B":"刘子豪"},{"A":"八1","B":"王怡诺"},{"A":"八3","B":"王鑫硕"},{"A":"八1","B":"骆家骏"},{"A":"八1","B":"封昊成"},{"A":"八1","B":"李宜航"},{"A":"八1","B":"高圣顺"},{"A":"八3","B":"吴荟欣"},{"A":"八3","B":"张佩琳"},{"A":"八4","B":"苏思诺"},{"A":"八4","B":"郭佳琪"},{"A":"八4","B":"白嘉豪"},{"A":"八1","B":"燕轶冉"},{"A":"八1","B":"刘梓昱"},{"A":"八1","B":"丁香羽"},{"A":"八3","B":"宋心怡"},{"A":"八4","B":"崔家源"},{"A":"八4","B":"徐欣怡"},{"A":"八3","B":"张克谦"},{"A":"八1","B":"王钰麟"},{"A":"八3","B":"陈逸鸣"},{"A":"八1","B":"王皓宇"},{"A":"八1","B":"阎屹华"},{"A":"八3","B":"王朔"},{"A":"八1","B":"王欣妤"},{"A":"八4","B":"任星豪"},{"A":"八4","B":"王兹墨"},{"A":"八3","B":"王子涵"},{"A":"八4","B":"江宜诺"},{"A":"八4","B":"朱心豫"},{"A":"八3","B":"桂晗旭"},{"A":"八4","B":"查佳奇"},{"A":"八4","B":"张紫涵"},{"A":"八3","B":"郝锴瑞"},{"A":"八1","B":"郭一诺"},{"A":"八3","B":"吴彬"},{"A":"八4","B":"王玉仙"},{"A":"八3","B":"邵光鑫"},{"A":"八1","B":"赵皓华"},{"A":"八3","B":"王玫琳"},{"A":"八4","B":"李沛然"},{"A":"八4","B":"王馨盈"},{"A":"八1","B":"朱星燕"},{"A":"八4","B":"刘禹轩"},{"A":"八4","B":"刘雨嘉"},{"A":"八1","B":"钱智辉"},{"A":"八4","B":"郭世豪"},{"A":"八3","B":"牛一丞"},{"A":"八3","B":"刘世豪"},{"A":"八3","B":"崔艺涵"},{"A":"八3","B":"张紫涵"},{"A":"八1","B":"廖帅清"},{"A":"八1","B":"杨奥博"},{"A":"八1","B":"王琦颖"},{"A":"八3","B":"李文聪"},{"A":"八1","B":"袁凡"},{"A":"八4","B":"刘绮羽"},{"A":"八4","B":"王朋阳"},{"A":"八3","B":"李淼雨"},{"A":"八4","B":"焦子涵"},{"A":"八1","B":"程玥瑶"},{"A":"八4","B":"刘博"},{"A":"八3","B":"倘可馨"},{"A":"八1","B":"王熙越"},{"A":"八3","B":"梁楚涵"},{"A":"八3","B":"邵潇然"},{"A":"八3","B":"徐一渤"},{"A":"八3","B":"王仪琳"},{"A":"八1","B":"侯铭哲"},{"A":"八1","B":"高瑞雪"},{"A":"八4","B":"夏子尚"},{"A":"八1","B":"王雨涵"},{"A":"八3","B":"姚灵杰"},{"A":"八4","B":"李智鑫"},{"A":"八3","B":"徐嘉茹"},{"A":"八1","B":"王子怡"},{"A":"八1","B":"陈佰润"},{"A":"八4","B":"张涵博"},{"A":"八3","B":"耿梓晨"},{"A":"八4","B":"高梦超"},{"A":"八3","B":"张博涵"},{"A":"八4","B":"苏景涛"},{"A":"八4","B":"苏景莹"},{"A":"八1","B":"朱硕寓"},{"A":"八1","B":"马一鸣"},{"A":"八1","B":"王梓硕"},{"A":"八4","B":"杨东旭"},{"A":"八3","B":"王晓雅"},{"A":"八1","B":"臧新悦"},{"A":"八4","B":"魏斌"},{"A":"八1","B":"王安迪"},{"A":"七6","B":"张艺涵"},{"A":"七6","B":"靳亚培"},{"A":"七6","B":"李嘉涵"},{"A":"七6","B":"郝佳琳"},{"A":"七1","B":"伍悠然"},{"A":"七6","B":"赵航越"},{"A":"七6","B":"台梓萌"},{"A":"七6","B":"崔紫宸"},{"A":"七1","B":"石昊宇"},{"A":"七6","B":"张文启"},{"A":"七6","B":"鲁宇翔"},{"A":"七6","B":"徐悦婷"},{"A":"七1","B":"李哲"},{"A":"七1","B":"崔峻熙"},{"A":"七1","B":"韩皓轩"},{"A":"七6","B":"封涵曦"},{"A":"七6","B":"耿欣怡"},{"A":"七6","B":"李晨瑜"},{"A":"七1","B":"刘焦点"},{"A":"七6","B":"牛雨欣"},{"A":"七1","B":"田家祎"},{"A":"七6","B":"崔志翔"},{"A":"七6","B":"何照辉"},{"A":"七6","B":"李皓辰"},{"A":"七6","B":"李祎哲"},{"A":"七3","B":"王芊淳"},{"A":"七1","B":"孙浩磊"},{"A":"七2","B":"党晨鑫"},{"A":"七2","B":"崔皓翔"},{"A":"七6","B":"贾云露"},{"A":"七1","B":"李智博"},{"A":"七2","B":"张寒雨"},{"A":"七1","B":"费翔"},{"A":"七2","B":"蒋尚嘉"},{"A":"七1","B":"贾云龙"},{"A":"七6","B":"张源鑫"},{"A":"七1","B":"白兴硕"},{"A":"七1","B":"夏紫淇"},{"A":"七6","B":"吉梓烨"},{"A":"七5","B":"李思琪"},{"A":"七1","B":"王一宣"},{"A":"七5","B":"夏梦雅"},{"A":"七1","B":"理翔宇"},{"A":"七6","B":"徐铭"},{"A":"七6","B":"丁思元"},{"A":"七5","B":"曾许诺"},{"A":"七5","B":"谢一一"},{"A":"七6","B":"鲁美辰"},{"A":"七6","B":"李宇哲"},{"A":"七3","B":"石宸煜"},{"A":"七5","B":"李涛"},{"A":"七6","B":"王子轩"},{"A":"七5","B":"徐若茜"},{"A":"七6","B":"刘哲铭"},{"A":"七5","B":"付雪媛"},{"A":"七1","B":"苏泽熙"},{"A":"七5","B":"付熠豪"},{"A":"七5","B":"崔欣怡"},{"A":"七6","B":"张雅雯"},{"A":"七6","B":"宋以恒"},{"A":"七1","B":"张佳琪"},{"A":"七1","B":"陈函冰"},{"A":"七1","B":"臧佳琪"},{"A":"七6","B":"谷晨琳"},{"A":"七6","B":"郝紫涵"},{"A":"七5","B":"李烨桐"},{"A":"七1","B":"井裕淦"},{"A":"七5","B":"吕梦菲"},{"A":"七1","B":"张一凡"},{"A":"七1","B":"高家旭"},{"A":"七2","B":"李豪"},{"A":"七3","B":"岳浴森"},{"A":"七5","B":"李恩熙"},{"A":"七6","B":"郭正扬"},{"A":"七1","B":"郭浩冉"},{"A":"七6","B":"刘运昌"},{"A":"七6","B":"吴奇霖"},{"A":"七6","B":"苏岳森"},{"A":"七5","B":"马沈麒"},{"A":"七5","B":"姬要"},{"A":"七1","B":"付雅洁"},{"A":"七1","B":"崔凯迪"},{"A":"七1","B":"王荣焕"},{"A":"七1","B":"刘祉君"},{"A":"七2","B":"李思纯"},{"A":"七5","B":"苏冰爽"},{"A":"七5","B":"刘子豪"},{"A":"七1","B":"樊浩宇"},{"A":"七2","B":"杨紫妔"},{"A":"七6","B":"杨浩宇"},{"A":"七5","B":"陈欣"},{"A":"七1","B":"杨子琪"},{"A":"七4","B":"蔡文昊"},{"A":"七2","B":"张文滔"},{"A":"七5","B":"王浩楠"},{"A":"七6","B":"徐若雯"},{"A":"七1","B":"杜欣昊"},{"A":"七2","B":"吴桦谖"},{"A":"七4","B":"衡远嵩"},{"A":"七6","B":"董惜萌"},{"A":"七1","B":"张子渊"},{"A":"七5","B":"张静宜"},{"A":"七1","B":"王绎雯"},{"A":"七2","B":"黄越"},{"A":"七5","B":"郭珂欣"},{"A":"七1","B":"马建鹏"},{"A":"七6","B":"翟宇鹤"},{"A":"七2","B":"陈博文"},{"A":"七3","B":"谢伊雯"},{"A":"七3","B":"刘宣壮"},{"A":"七2","B":"雷卓凡"},{"A":"七5","B":"李雨泽"},{"A":"七4","B":"赵紫涵"},{"A":"七5","B":"赵梓贺"},{"A":"七4","B":"孙艺瑄"},{"A":"七6","B":"孟煜桦"},{"A":"七5","B":"贾翔宇"},{"A":"七5","B":"陈怡如"},{"A":"七5","B":"张朔晗"},{"A":"七1","B":"董思言"},{"A":"七2","B":"马可馨"},{"A":"七2","B":"朱梓涵"},{"A":"七4","B":"张程凯"},{"A":"七2","B":"王雅心"},{"A":"七2","B":"宋怡晓"},{"A":"七2","B":"单子阳"},{"A":"七3","B":"晁子恒"},{"A":"七4","B":"徐毅柯"},{"A":"七1","B":"单子源"},{"A":"七2","B":"王昱硕"},{"A":"七3","B":"夏语诺"},{"A":"七5","B":"崔嘉轩"},{"A":"七1","B":"张嘉傲"},{"A":"七2","B":"王一淳"},{"A":"七3","B":"王攀博"},{"A":"七2","B":"曹东涵"},{"A":"七3","B":"陈诗涵"},{"A":"七2","B":"高若彤"},{"A":"七5","B":"李诺冉"},{"A":"七2","B":"丁雨婷"},{"A":"七6","B":"李妍臻"},{"A":"七2","B":"崔艺涵"},{"A":"七3","B":"张琰淼"},{"A":"七2","B":"郝梦瑶"},{"A":"七1","B":"张智宸"},{"A":"七4","B":"靳俊熙"},{"A":"七1","B":"刘佳明"},{"A":"七2","B":"闫硕"},{"A":"七3","B":"叶圆圆"},{"A":"七5","B":"王浩宇"},{"A":"七4","B":"宋留生"},{"A":"七4","B":"张家铭"},{"A":"七3","B":"王子昊"},{"A":"七6","B":"侯勇乐"},{"A":"七4","B":"付媛媛"},{"A":"七1","B":"王畅阳"},{"A":"七5","B":"杨若佳"},{"A":"七2","B":"谷雨泽"},{"A":"七2","B":"高晓博"},{"A":"七5","B":"崔鹤源"},{"A":"七1","B":"王艺诗琪"},{"A":"七4","B":"余中华"},{"A":"七2","B":"袁紫涵"},{"A":"七3","B":"弓昊冉"},{"A":"七5","B":"王辰洋"},{"A":"七2","B":"衡姿诺"},{"A":"七1","B":"王岩松"},{"A":"七5","B":"张嘉倪"},{"A":"七4","B":"孙子轩"},{"A":"七4","B":"黄嘉瑞"},{"A":"七1","B":"张越涵"},{"A":"七2","B":"王嘉欣"},{"A":"七6","B":"刘宜嘉"},{"A":"七5","B":"朱嘉豪"},{"A":"七5","B":"刘少恩"},{"A":"七5","B":"欧阳瑞晴"},{"A":"七3","B":"武紫怡"},{"A":"七4","B":"熊江原"},{"A":"七4","B":"徐泽坤"},{"A":"七2","B":"孙逸涵"},{"A":"七5","B":"苏浩桐"},{"A":"七5","B":"黄浩展"},{"A":"七5","B":"杨景景"},{"A":"七3","B":"金培欣"},{"A":"七3","B":"贾瑞滢"},{"A":"七2","B":"吉子欣"},{"A":"七2","B":"徐子雅"},{"A":"七3","B":"王瑞琦"},{"A":"七6","B":"陈浩哲"},{"A":"七4","B":"黄昱龍"},{"A":"七4","B":"兰蕙歆"},{"A":"七4","B":"吴依潼"},{"A":"七1","B":"王一婷"},{"A":"七5","B":"赵培涵"},{"A":"七2","B":"李宜琦"},{"A":"七4","B":"孙琳琳"},{"A":"七5","B":"张紫奥"},{"A":"七2","B":"周源柯"},{"A":"七4","B":"杜俊卿"},{"A":"七6","B":"王恩星"},{"A":"七5","B":"吴弈恺"},{"A":"七3","B":"李甲园"},{"A":"七4","B":"王佳博"},{"A":"七2","B":"马一鸣"},{"A":"七3","B":"陈怡婷"},{"A":"七2","B":"王悦鑫"},{"A":"七3","B":"张欣怡"},{"A":"七2","B":"姚甜甜"},{"A":"七5","B":"黄浩翔"},{"A":"七5","B":"岳濮涵"},{"A":"七3","B":"王明哲"},{"A":"七3","B":"李翔"},{"A":"七4","B":"李易燃"},{"A":"七5","B":"陈广岩"},{"A":"七3","B":"丁筱雅"},{"A":"七3","B":"陈柏伊"},{"A":"七2","B":"刘雨轩"},{"A":"七2","B":"赵一冉"},{"A":"七4","B":"刘梦烁"},{"A":"七3","B":"高艺哲"},{"A":"七3","B":"张梦迪"},{"A":"七3","B":"王雨晓"},{"A":"七3","B":"李亚轩"},{"A":"七3","B":"庄雅晴"},{"A":"七2","B":"崔睿涵"},{"A":"七3","B":"林吉祥"},{"A":"七4","B":"王天乐"},{"A":"七2","B":"吴家淇"},{"A":"七3","B":"王硕"},{"A":"七4","B":"刘俊熙"},{"A":"七3","B":"谢欣怡"},{"A":"七3","B":"麻校瑜"},{"A":"七4","B":"王思晨"},{"A":"七3","B":"汪宇航"},{"A":"七3","B":"程春雨"},{"A":"七4","B":"王稚皓"},{"A":"七4","B":"黄语琪"},{"A":"七4","B":"徐嘉庆"},{"A":"七4","B":"薛哲瀚"},{"A":"七3","B":"张思齐"},{"A":"七4","B":"吴曌赟"},{"A":"七4","B":"王旭尧"},{"A":"七4","B":"杨茗皓"},{"A":"七4","B":"任帅宇"},{"A":"七3","B":"饶文涛"},{"A":"七4","B":"王珂依"},{"A":"七3","B":"李钰萱"},{"A":"七3","B":"曹萌博"},{"A":"七2","B":"杜明哲"},{"A":"七3","B":"张世嵚"},{"A":"七4","B":"宋垚坤"},{"A":"七4","B":"雷亚鹏"},{"A":"七2","B":"刘子硕"},{"A":"七4","B":"张仕杰"},{"A":"七4","B":"李正源"},{"A":"七3","B":"艾信润"},{"A":"七4","B":"赵子任"},{"A":"七3","B":"李昱含"},{"A":"七4","B":"吴杨锦"},{"A":"七3","B":"崔宇诚"},{"A":"七3","B":"吴欣雨"},{"A":"七4","B":"李珍如"},{"A":"七3","B":"刘昌雨"},{"A":"七4","B":"张羽航"},{"A":"七4","B":"闫馨雨"}]'
      );

      let historyWinners = [];
      let roundCount = 0;

      const soundEffect = document.getElementById('soundEffect');

      // 发牌算法
      function shuffle(arr) {
        var length = arr.length,
          temp,
          random;
        while (0 != length) {
          random = Math.floor(Math.random() * length);
          length--;
          temp = arr[length];
          arr[length] = arr[random];
          arr[random] = temp;
        }
        return arr;
      }

      const audio = new Audio('./surprise.mp3');
      audio.preload = 'auto';
      audio.load();

      function drawWinners() {
        const drawButton = document.getElementById('drawButton');
        const winnersCountInput = document.getElementById('winnersCount');
        const winnersCount = parseInt(winnersCountInput.value);

        drawButton.disabled = true;

        const winnersContainer = document.getElementById('winnersContainer');
        const roundContainer = document.createElement('div');
        roundContainer.classList.add('round');
        winnersContainer.appendChild(roundContainer);

        if (participants.length < winnersCount) {
          alert('中奖人数超过剩余人数，无法进行抽奖！');
          drawButton.disabled = false;
          return;
        }

        // 从参与者中随机抽取指定数量的人员
        const shuffledParticipants = shuffle(participants);
        const selectedWinners = shuffledParticipants.slice(0, winnersCount);

        // 显示抽奖结果
        const roundTitle = document.createElement('div');
        roundTitle.classList.add('round-title');
        roundTitle.textContent = `第${roundCount + 1}轮抽奖`;
        roundContainer.appendChild(roundTitle);

        const winnerList = document.createElement('ul');
        winnerList.classList.add('winner-list');
        roundContainer.appendChild(winnerList);

        selectedWinners.forEach((winner, index) => {
          setTimeout(() => {
            const listItem = document.createElement('li');
            listItem.textContent = `${winner.B}  ${winner.A} `;
            listItem.classList.add('show');
            winnerList.appendChild(listItem);

            // 播放音效
            audio.play();
          }, index * 1200);
        });

        // 保存中奖名单到历史记录
        historyWinners.push(selectedWinners);

        // 从参与者数组中移除已中奖的人员
        participants = participants.filter((participant) => !selectedWinners.includes(participant));

        // 启用抽奖按钮
        setTimeout(() => {
          drawButton.disabled = false;
          updateButtonText();
        }, selectedWinners.length * 1200 + 500);
      }
      function updateButtonText() {
        const drawButton = document.getElementById('drawButton');
        roundCount += 1;
        drawButton.textContent = `第${roundCount + 1}轮抽奖`;
      }
    </script>
  </body>
</html>
